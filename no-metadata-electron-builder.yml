appId: com.ai.efficiency
productName: AI提效
files:
  - main.js
  - dist/main.cjs
  - package.json
  - preload/**/*
  - public/icons/**/*
  - from: '.next/standalone/'
    to: '.next/standalone/'
  - from: 'node_modules/next-electron-rsc/'
    to: 'node_modules/next-electron-rsc/'
  - from: 'node_modules/electron-serve/'
    to: 'node_modules/electron-serve/'
  # 精简不必要的文件
  - "!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme}"
  - "!**/node_modules/*/{test,__tests__,tests,powered-test,example,examples}"
  - "!**/node_modules/*/{.git,.github,.vscode,docs,doc,website}"
extraResources:
  - from: "node_modules/next-electron-rsc/"
    to: "app/node_modules/next-electron-rsc/"
asar: true
asarUnpack:
  - "node_modules/next-electron-rsc/**/*"
# 降低压缩级别，加快构建速度
compression: store
directories:
  output: dist
  buildResources: public/icons
# 使用国内镜像并设置缓存
electronDownload:
  mirror: https://npmmirror.com/mirrors/electron/
  cache: ./electron-cache
# Windows特定优化 - 简化配置
win:
  target: nsis
  # 禁用图标设置，避免rcedit错误
  # icon: "public/icons/icon-512x512.png"
  artifactName: "${productName}-${version}-setup.${ext}"
# 简化NSIS安装程序设置
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  perMachine: false
  # 禁用图标和元数据设置，避免rcedit错误
  # createDesktopShortcut: true
  # createStartMenuShortcut: true
  # shortcutName: "AI提效"
  # menuCategory: "AI工具"
  differentialPackage: false
  include: build/installer.nsh
  # 自定义安装目录名称，防止创建额外的子文件夹
  installDirectory: "AI提效"
 